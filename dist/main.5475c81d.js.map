{"version":3,"sources":["main.js"],"names":["Compute","a","b","Calculator","doc","oCal","document","querySelector","fInput","querySelectorAll","sInput","oBtnGroup","oBtnItems","oResult","getElementsByClassName","data","defineData","console","log","btnIndex","bindEvent","addEventListener","onFieldBtn","bind","onNumberInput","_obj","fNumber","sNumber","field","_self","Object","defineProperties","get","set","newVal","computeResult","ev","e","window","event","tar","target","srcElement","tagName","toLowerCase","fieldUpdate","className","indexOf","call","getAttribute","val","Number","value","replace","innerText","init"],"mappings":"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","file":"main.5475c81d.js","sourceRoot":"..\\src","sourcesContent":["class Compute {\r\n  plus(a,b){\r\n    return a + b\r\n  }\r\n  minus(a,b){\r\n    return a - b\r\n  }\r\n  mul(a,b){\r\n    return a * b\r\n  }\r\n  div(a,b){\r\n    return a / b\r\n  }\r\n}\r\n\r\nclass Calculator extends Compute{\r\n  constructor(doc) {\r\n    super()\r\n\r\n    const oCal = document.querySelector('.J_calculator')\r\n\r\n    this.fInput = oCal.querySelectorAll('input')[0]\r\n    this.sInput = oCal.querySelectorAll('input')[1]\r\n\r\n    this.oBtnGroup = oCal.querySelector('.btn-group')\r\n    this.oBtnItems = this.oBtnGroup.querySelectorAll('button')\r\n    this.oResult = oCal.getElementsByClassName('result')[0]\r\n\r\n\r\n    this.data = this.defineData()\r\n    console.log(this.data)\r\n    this.btnIndex = 0\r\n  }\r\n\r\n  init() {\r\n    this.bindEvent()\r\n  }\r\n\r\n  bindEvent() {\r\n    this.oBtnGroup.addEventListener('click', this.onFieldBtn.bind(this), false)\r\n    this.fInput.addEventListener('input', this.onNumberInput.bind(this, false))\r\n    this.sInput.addEventListener('input', this.onNumberInput.bind(this, false))\r\n\r\n  }\r\n\r\n  // 定义数据\r\n  defineData() {\r\n    // 定义初始值\r\n    let _obj = {},\r\n      fNumber = 0,\r\n      sNumber = 0,\r\n      field = 'plus'\r\n\r\n    // 取到外部的this 能在defineProperties内部中访问到\r\n    const _self = this\r\n\r\n    Object.defineProperties(_obj, {\r\n      fNumber: {\r\n        get() {\r\n          console.log(' \"fNumber\" 已经被获取 ')\r\n          return fNumber\r\n        },\r\n        set(newVal) {\r\n          fNumber = newVal\r\n          _self.computeResult(fNumber, sNumber, field)\r\n          console.log(` 当前的值：“ fNumber ” 发生改变。 [${fNumber}]`)\r\n        }\r\n      },\r\n      sNumber: {\r\n        get() {\r\n          console.log(' \"sNumber\" 已经被获取 ')\r\n          return sNumber\r\n        },\r\n        set(newVal) {\r\n          sNumber = newVal\r\n          _self.computeResult(fNumber, sNumber, field)\r\n          console.log(` 当前的值：“ sNumber ” 发生改变。 [${sNumber}]`)\r\n        }\r\n\r\n      },\r\n      field: {\r\n        get() {\r\n          console.log(' \"field\" 已经被获取 ')\r\n          return field\r\n        },\r\n        set(newVal) {\r\n          field = newVal\r\n          _self.computeResult(fNumber, sNumber, field)\r\n          console.log(` 当前的值：“ field ” 发生改变。 [${field}]`)\r\n        }\r\n\r\n      },\r\n    })\r\n    return _obj\r\n  }\r\n\r\n\r\n  onFieldBtn(ev) {\r\n    const e = ev || window.event,\r\n      tar = e.target || e.srcElement,\r\n      tagName = tar.tagName.toLowerCase()\r\n\r\n    tagName === 'button' && this.fieldUpdate(tar)\r\n  }\r\n\r\n  // 切换按钮，\r\n  fieldUpdate(target) {\r\n    // 当点击之前的按钮样式清空\r\n    this.oBtnItems[this.btnIndex].className = ''\r\n    // 获取 当前按钮的index\r\n    this.btnIndex = [].indexOf.call(this.oBtnItems, target)\r\n    target.className += 'current'\r\n    // 改变当前按钮的 属性field\r\n    this.data.field = target.getAttribute('data-field')\r\n  }\r\n\r\n  // 获取 input 输入的值 并给 this.data。fNumber / sNumber\r\n  onNumberInput(ev) {\r\n    const e = ev || window.event,\r\n      tar = e.target || e.srcElement,\r\n      className = tar.className,\r\n      val = Number(tar.value.replace(/\\s+/g, '')) || 0\r\n\r\n\r\n    switch (className) {\r\n      case 'f-input':\r\n        this.data.fNumber = val\r\n        break;\r\n      case  's-input':\r\n        this.data.sNumber = val\r\n        break;\r\n      default:\r\n        break\r\n    }\r\n  }\r\n\r\n\r\n\r\n  computeResult(fNumber, sNumber, field) {\r\n    this.oResult.innerText = this[field](fNumber,sNumber)\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\nnew Calculator(document).init()\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}